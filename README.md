# ğŸ¬ CineMatch - Recomendador de PelÃ­culas

**CineMatch** es una aplicaciÃ³n web desarrollada en **Jakarta EE** (Java 17) que permite a los usuarios registrar sus pelÃ­culas favoritas, recibir recomendaciones personalizadas y gestionar una base de datos de valoraciones.

Este proyecto tiene un enfoque didÃ¡ctico para demostrar la implementaciÃ³n correcta de arquitecturas de software en Java Web sin el uso de frameworks pesados, utilizando **Oracle Database** como motor de persistencia y **GlassFish** como servidor de aplicaciones.

## ğŸ“‹ Tabla de Contenidos
* [CaracterÃ­sticas](#-caracterÃ­sticas)
* [TecnologÃ­as](#-tecnologÃ­as)
* [Arquitectura del Software](#-arquitectura-del-software)
* [Base de Datos (Oracle SQL)](#-base-de-datos-oracle-sql)
* [InstalaciÃ³n y Despliegue](#-instalaciÃ³n-y-despliegue)

---

## ğŸš€ CaracterÃ­sticas

La aplicaciÃ³n gestiona las siguientes operaciones a travÃ©s de un formulario centralizado:

* **Registrar Preferencia:** Permite guardar la valoraciÃ³n (1-5) de un usuario para una pelÃ­cula especÃ­fica.
* **Recomendar PelÃ­cula:** Algoritmo que sugiere pelÃ­culas del gÃ©nero favorito seleccionado con la mejor puntuaciÃ³n media global.
* **Consultar Historial:** Muestra todas las pelÃ­culas que un usuario (identificado por alias) ha registrado.
* **Borrar Historial:** Elimina todos los registros asociados a un alias.
* **Top PelÃ­culas:** Muestra un ranking de las pelÃ­culas mejor valoradas en el sistema.

---

## ğŸ›  TecnologÃ­as

* **Java 17** (OpenJDK / Oracle JDK)
* **Jakarta EE 9/10** (Servlet 5.0, JSP 3.0)
* **Maven** (GestiÃ³n de dependencias y construcciÃ³n)
* **GlassFish 6/7** (Servidor de Aplicaciones)
* **Oracle Database** (Motor de persistencia)
* **JSTL** (JavaServer Pages Standard Tag Library)

---

## ğŸ—ï¸ Arquitectura del Software

El proyecto sigue estrictamente los siguientes patrones de diseÃ±o:

### 1. MVC (Modelo-Vista-Controlador)
* **Modelo:** Clases POJO (`Pelicula`, `UsuarioPelicula`) y lÃ³gica de negocio (`CineService`).
* **Vista:** Archivos JSP en `/WEB-INF/views` que utilizan JSTL y EL. Sin *Scriptlets* Java.
* **Controlador:** Un Ãºnico Servlet (`CineController`) que orquesta el flujo.

### 2. PRG (Post-Redirect-Get)
PatrÃ³n utilizado para evitar envÃ­os duplicados de formularios al recargar la pÃ¡gina:
1.  **POST:** EnvÃ­o de datos al Servlet.
2.  **REDIRECT:** `response.sendRedirect()` tras procesar la lÃ³gica.
3.  **GET:** Renderizado de la vista final con datos actualizados.

### 3. DAO (Data Access Object)
Acceso a datos desacoplado utilizando JDBC puro:
* **Conexion.java:** GestiÃ³n centralizada de la conexiÃ³n JDBC.
* **DAOs:** Clases especÃ­ficas para operaciones CRUD sobre las tablas.

---

## ğŸ—„ï¸ Base de Datos (Oracle SQL)

Ejecuta el siguiente script en tu cliente de Oracle para crear el esquema.
> **Nota:** Se utiliza la sintaxis de columnas de identidad (Oracle 12c+).

```sql
-- 1. Tabla de CatÃ¡logo de PelÃ­culas
CREATE TABLE PELICULA (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    TITULO VARCHAR2(100) NOT NULL,
    GENERO VARCHAR2(30) NOT NULL, 
    PUNTUACION_MEDIA NUMBER(3,1) DEFAULT 0.0
);

-- 2. Tabla de Historial de Usuarios
CREATE TABLE USUARIO_PELICULA (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ALIAS VARCHAR2(50) NOT NULL,
    PELICULA_ID NUMBER NOT NULL,
    VALORACION NUMBER(2,1),
    FECHA_REGISTRO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT FK_PELICULA FOREIGN KEY (PELICULA_ID) REFERENCES PELICULA(ID),
    CONSTRAINT CHK_VALORACION CHECK (VALORACION >= 1 AND VALORACION <= 5)
);

-- Seed Data (Datos de prueba)
INSERT INTO PELICULA (TITULO, GENERO, PUNTUACION_MEDIA) VALUES ('Mad Max: Fury Road', 'ACCIÃ“N', 4.7);
INSERT INTO PELICULA (TITULO, GENERO, PUNTUACION_MEDIA) VALUES ('The Godfather', 'DRAMA', 5.0);
INSERT INTO PELICULA (TITULO, GENERO, PUNTUACION_MEDIA) VALUES ('Inception', 'CIENCIA FICCIÃ“N', 4.8);
COMMIT;
```

---

## âš™ï¸ InstalaciÃ³n y Despliegue

### 1. ConfiguraciÃ³n de Base de Datos
Edita el archivo `src/main/java/com/azarquiel/cinematch/dao/Conexion.java` con tus credenciales:

```java
String url = "jdbc:oracle:thin:@localhost:1521:XE"; // Ajustar segÃºn tu SID/ServiceName
String user = "SYSTEM";
String pass = "TU_CONTRASEÃ‘A";
```

### 2. ConstrucciÃ³n con Maven
Como el proyecto incluye el driver `ojdbc8` en el `pom.xml`, Maven gestionarÃ¡ la descarga. Desde la raÃ­z del proyecto ejecuta:

```bash
mvn clean package
```
Esto generarÃ¡ el archivo `cinematch-RecomendadorPeliculas.war` en la carpeta `/target`.

### 3. Despliegue en GlassFish
1.  Inicia tu dominio de GlassFish: `asadmin start-domain`.
2.  Accede a la consola de administraciÃ³n (usualmente `http://localhost:4848`).
3.  Ve a **Applications** -> **Deploy**.
4.  Sube el archivo `.war` generado en el paso anterior.
5.  Accede a la aplicaciÃ³n en:
    `http://localhost:8080/cinematch-RecomendadorPeliculas`
    
-----
ğŸ‘¨â€ğŸ’» Desarrollado por **Lucilene Vidal Lima**
